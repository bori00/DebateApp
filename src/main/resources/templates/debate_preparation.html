<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>DebateApp | Active Debate</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" type="text/css"/>
    <link rel="stylesheet" th:href="@{/webjars/font-awesome/4.7.0/css/font-awesome.min.css}"
          type="text/css"/>
    <script crossorigin src="https://unpkg.com/@daily-co/daily-js"></script>
    <script type="text/javascript" th:src="@{/debate_call_utils.js}"></script>
    <script type="text/javascript" th:src="@{/server_communication_utils.js}"></script>
    <script type="text/javascript" th:src="@{/timing_utils.js}"></script>
    <script type="text/javascript" th:src="@{/local.config.js}"></script>
    <script type="text/javascript" th:src="@{/debate_preparation.js}"></script>
    <script type="text/javascript" th:src="@{/close_debate.js}"></script>
    <script src="/webjars/sockjs-client/sockjs.min.js"></script>
    <script src="/webjars/stomp-websocket/stomp.min.js"></script>
    <script src="/webjars/jquery/3.1.1/jquery.min.js"></script>
    <script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
    <script th:src="@{/menu_controller.js}"></script>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <style>
        .hide {
            display: none;
        }
        .pro-team{
            border-width: 5px;
            border-style: solid;
            border-radius: 15px;
            color:green;
        }
        .contra-team {
            border-width: 5px;
            border-style: solid;
            border-radius: 15px;
            color: #c62424;
        }
    </style>
</head>
<body th:onload="'joinDebateMeeting(' + ${isJudge} + ',' + ${debateSessionId} +');loadMenu(); subscribeToClosedDebateNotificationSocket();'">
<div class="container text-center">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
            <a class="navbar-brand" th:href="@{/home}">Debate App</a>
            <ul id="menu_items" class="navbar-nav mr-auto mt-2 mt-lg-0">
            </ul>
            <form th:action="@{/logout}" method="post">
                <input type="submit" value = "Sign Out">
            </form>
        </div>
    </nav>

    <div class="card p-3 bg-light m-5">
        <div class="card-body" id="card-body">
            <p>Debate Preparation phase</p>
            <h3 id="timer-clock">00:00:00</h3>
        </div>
    </div>
    <div>
        <button
                type="button"
                id="join-preparation-team-pro"
                class="btn btn-success hide"
                th:onclick="joinPreparationMeetingOfTeamPro()"
        >
            Join preparation of team Pro
        </button>
        <button
                type="button"
                id="join-preparation-team-contra"
                class="btn btn-danger hide"
                th:onclick="joinPreparationMeetingOfTeamContra()"
        >
            Join preparation of team Contra
        </button>
        <button
                type="button"
                id="close-debate"
                class="btn btn-warning"
                th:if="${isJudge}"
                th:onclick="'closeDebate(' + ${debateSessionId} + ')'"
        >
            Close debate session
        </button>
    </div>

    <div class="row">
        <div class="col-sm-8">
            <div id="wrapper">
            </div>
        </div>
        <div class="col-sm-4" style="margin-top:20px">
            <form th:object="${debateTemplate}"
                  class="card p-3 bg-light"
                  style="max-width: 600px; margin: 0 auto;">
                <h5>Resources</h5>
                <ul class="list-group" th:each="resourceLink : *{resourceLinks}">
                    <li class="list-group-item">
                        <a th:href="${resourceLink.link}" th:text="${resourceLink.title}">
                            Link
                        </a>
                    </li>
                </ul>
            </form>
        </div>
    </div>

</div>
</body>
</html>